<script type="text/x-handlebars" data-template-name="items">
  <section id="todoapp">
    <section id="navigation">
      <%= link_to 'Sign out', destroy_user_session_path %>
    </section>
    <h1>Todo List</h1>

    <div class="item-row header-row">
      <div class="item-completed">Done</div>
      <div class="item-summary"></div>
      <div class="item-priority">Priority</div>
      <div class="item-due-date">Due</div>
    </div>

    <div class="item-row">
      <div class="item-completed"></div>
      <div class="item-summary">
        {{input type="text" id="new-item" placeholder="Enter new item" value=newSummary action="createItem"}}
      </div>
      <div class="item-priority">
        {{item-priority-input value=newPriority}}
      </div>
      <div class="item-due-date">
        {{enter-item-due-date class="datepicker" placeholder="Enter date" value=newDueDate}}
      </div>
      <div class="item-action">
        <button class="save" {{action "createItem"}}>Create</button>
      </div>
    </div>

    {{#each itemController="item"}}
      <div class="item-row" {{action "editItem" on="doubleClick"}}>
        <div class="item-completed">{{input type="checkbox" checked=isCompleted class="toggle"}}</div>
        <div class="item-summary" {{bind-attr class="isCompleted:completed isEditing:editing"}}>
          {{#if isEditing}}
            {{edit-item class="edit" value=summary insert-newline="editingFinished"}}
          {{else}}
            {{summary}}
          {{/if}}
        </div>
        <div class="item-priority">
          {{#if isEditing}}
            {{item-priority-input value=newPriority}}
          {{else}}
            {{priority}}
          {{/if}}
        </div>
        <div class="item-due-date">
          {{#if isEditing}}
            {{edit-item-due-date class="datepicker" value=due_date}}
          {{else}}
            {{dueDateString}}
          {{/if}}
        </div>
        <div class="item-action">
          {{#if isEditing}}
            <button class="save" {{action "acceptChanges"}}>Save</button>
          {{else}}
            <button {{action "removeItem"}} class="destroy">Delete</button>
          {{/if}}
        </div>
      </div>
    {{/each}}
  </section>
</script>
